{"remainingRequest":"/Users/luochang/Desktop/vue3-project/node_modules/babel-loader/lib/index.js!/Users/luochang/Desktop/vue3-project/node_modules/ts-loader/index.js??ref--14-2!/Users/luochang/Desktop/vue3-project/node_modules/eslint-loader/index.js??ref--13-0!/Users/luochang/Desktop/vue3-project/src/api/http.ts","dependencies":[{"path":"/Users/luochang/Desktop/vue3-project/src/api/http.ts","mtime":1641106804815},{"path":"/Users/luochang/Desktop/vue3-project/node_modules/cache-loader/dist/cjs.js","mtime":1615864461891},{"path":"/Users/luochang/Desktop/vue3-project/node_modules/babel-loader/lib/index.js","mtime":1615864461876},{"path":"/Users/luochang/Desktop/vue3-project/node_modules/ts-loader/index.js","mtime":1615864465705},{"path":"/Users/luochang/Desktop/vue3-project/node_modules/eslint-loader/index.js","mtime":1615864465073}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9sdW9jaGFuZy9EZXNrdG9wL3Z1ZTMtcHJvamVjdC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSAiL1VzZXJzL2x1b2NoYW5nL0Rlc2t0b3AvdnVlMy1wcm9qZWN0L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiL1VzZXJzL2x1b2NoYW5nL0Rlc2t0b3AvdnVlMy1wcm9qZWN0L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UuanMiOwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwppbXBvcnQgeyBnZXRDb29raWUgfSBmcm9tICdAL3V0aWxzL2F1dGgnOwppbXBvcnQgcm91dGVyIGZyb20gJ0Avcm91dGVyJzsKY29uc29sZS5sb2coJ3Byb2Nlc3MuZW52Lk5PREVfRU5WJywgcHJvY2Vzcy5lbnYuTk9ERV9FTlYpOwpjb25zb2xlLmxvZygncHJvY2Vzcy5lbnYuVlVFX0FQUF9BUElfQkFTRV9VUkwnLCBwcm9jZXNzLmVudi5WVUVfQVBQX0FQSV9CQVNFX1VSTCk7IC8vIOWIm+W7umF4aW9z5a6e5L6LCgp2YXIgaW5zdGFuY2UgPSBheGlvcy5jcmVhdGUoewogIC8vIGJhc2VVUkw6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicgPyBwcm9jZXNzLmVudi5WVUVfQVBQX0FQSV9CQVNFX1VSTCA6ICcnLCAvLyDlhbzlrrkgZ2l0aHVi6YeMIHZ1ZTMtcHJvamVjdCzlrp7pmYXpobnnm67lhbfkvZPmk43kvZzljLrliIYKICBiYXNlVVJMOiAnJywKICB0aW1lb3V0OiAxMDAwMCwKICB3aXRoQ3JlZGVudGlhbHM6IHRydWUKfSk7IC8vIOajgOafpeadg+mZkAoKZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlQXV0aCgpIHsKICB2YXIgdG9rZW4gPSBnZXRDb29raWUoKTsKCiAgaWYgKCF0b2tlbikgewogICAgcmV0dXJuIGZhbHNlOwogIH0KCiAgaW5zdGFuY2UuZGVmYXVsdHMuaGVhZGVycy5jb21tb24uQXV0aG9yaXphdGlvbiA9IHRva2VuOwogIHJldHVybiB0cnVlOwp9IC8vIOa3u+WKoOivt+axguaXtuaLpuaIqgoKaW5zdGFuY2UuaW50ZXJjZXB0b3JzLnJlcXVlc3QudXNlKGZ1bmN0aW9uIChjb25maWcpIHsKICB2YXIgaXNOZWVkQXV0aCA9IGNvbmZpZy5hdXRoIHx8IGZhbHNlOwoKICBpZiAoaXNOZWVkQXV0aCkgewogICAgdmFyIGhhc1Rva2VuID0gdmFsaWRhdGVBdXRoKCk7CgogICAgaWYgKCFoYXNUb2tlbikgewogICAgICB2YXIgZXJyb3IgPSBuZXcgRXJyb3IoJ+aaguaXoOadg+mZkCcpOwogICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwogICAgfQogIH0KCiAgcmV0dXJuIGNvbmZpZzsKfSk7IC8vIOa3u+WKoOWTjeW6lOaXtueahOaLpuaIqgoKaW5zdGFuY2UuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLnVzZShmdW5jdGlvbiAocmVzcG9uc2UpIHsKICBpZiAocmVzcG9uc2Uuc3RhdHVzID49IDIwMCAmJiByZXNwb25zZS5zdGF0dXMgPCAzMDApIHsKICAgIHZhciBjb2RlID0gcmVzcG9uc2UuZGF0YS5jb2RlOwoKICAgIGlmIChjb2RlID09PSAyMDAgfHwgY29kZSA9PT0gMSB8fCBjb2RlID09PSAwKSB7CiAgICAgIHJldHVybiByZXNwb25zZTsKICAgIH0gLy8gaWYgKGNvZGUgPT09IDApIHsKICAgIC8vICAgcm91dGVyLnJlcGxhY2UoJy9sb2dpbicpCiAgICAvLyB9CgoKICAgIGlmIChjb2RlID09PSA0MDMpIHsKICAgICAgLy8g55So5oi35peg5p2D6ZmQCiAgICAgIHJvdXRlci5yZXBsYWNlKCcvNDAzJyk7CiAgICB9CgogICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHJlc3BvbnNlKTsKICB9CgogIHJldHVybiBQcm9taXNlLnJlamVjdChyZXNwb25zZSk7Cn0sIGZ1bmN0aW9uIChlcnJvcikgewogIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7Cn0pOwoKdmFyIEh0dHAgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIEh0dHAoKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgSHR0cCk7CiAgfQoKICBfY3JlYXRlQ2xhc3MoSHR0cCwgbnVsbCwgW3sKICAgIGtleTogImNyZWF0ZSIsCiAgICB2YWx1ZTogLy8g5bCB6KOFIEdFVOOAgVBPU1TjgIFQQVRDSOOAgVBVVOOAgURFTEVURSDnrYnor7fmsYLnmoTphY3nva7lj4LmlbAKICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55CiAgICBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfY3JlYXRlID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKGNvbmZpZykgewogICAgICAgIHZhciByZXMsIHJlc3VsdDsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiBpbnN0YW5jZShjb25maWcpOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICByZXMgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnkKICAgICAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMuc3VjY2Vzc1Jlc3BvbnNlKHJlcyk7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBQcm9taXNlLnJlc29sdmUocmVzdWx0KSk7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUsIHRoaXMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBjcmVhdGUoX3gpIHsKICAgICAgICByZXR1cm4gX2NyZWF0ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gY3JlYXRlOwogICAgfSgpIC8vIOi/lOWbnuaVsOaNruagvOW8jwoKICB9LCB7CiAgICBrZXk6ICJzdWNjZXNzUmVzcG9uc2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHN1Y2Nlc3NSZXNwb25zZShyZXMpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBjb2RlOiByZXMuZGF0YS5jb2RlIHx8IHJlcy5zdGF0dXMsCiAgICAgICAgZGF0YTogcmVzLmRhdGEuZGF0YSB8fCByZXMuZGF0YSwKICAgICAgICBtZXNzYWdlOiByZXMuZGF0YS5tZXNzYWdlIHx8IHJlcy5zdGF0dXNUZXh0CiAgICAgIH07CiAgICB9CiAgfV0pOwoKICByZXR1cm4gSHR0cDsKfSgpOwoKZXhwb3J0IHsgSHR0cCBhcyBkZWZhdWx0IH07"},{"version":3,"sources":["/Users/luochang/Desktop/vue3-project/node_modules/eslint-loader/index.js??ref--13-0!/Users/luochang/Desktop/vue3-project/src/api/http.ts"],"names":[],"mappings":";;;;;;;AAAA,OAAO,KAAP,MAAyD,OAAzD;AACA,SAAS,SAAT,QAA0B,cAA1B;AACA,OAAO,MAAP,MAAmB,UAAnB;AAEA,OAAO,CAAC,GAAR,CAAY,sBAAZ,EAAoC,OAAO,CAAC,GAAR,CAAY,QAAhD;AACA,OAAO,CAAC,GAAR,CAAY,kCAAZ,EAAgD,OAAO,CAAC,GAAR,CAAY,oBAA5D,E,CASA;;AACA,IAAM,QAAQ,GAAG,KAAK,CAAC,MAAN,CAAa;AAC5B;AACA,EAAA,OAAO,EAAE,EAFmB;AAG5B,EAAA,OAAO,EAAE,KAHmB;AAI5B,EAAA,eAAe,EAAE;AAJW,CAAb,CAAjB,C,CAOA;;AACA,OAAM,SAAU,YAAV,GAAsB;AAC1B,MAAM,KAAK,GAAG,SAAS,EAAvB;;AACA,MAAI,CAAC,KAAL,EAAY;AACV,WAAO,KAAP;AACD;;AACD,EAAA,QAAQ,CAAC,QAAT,CAAkB,OAAlB,CAA0B,MAA1B,CAAiC,aAAjC,GAAiD,KAAjD;AACA,SAAO,IAAP;AACD,C,CAED;;AACA,QAAQ,CAAC,YAAT,CAAsB,OAAtB,CAA8B,GAA9B,CAAkC,UAAC,MAAD,EAA+B;AAC/D,MAAM,UAAU,GAAG,MAAM,CAAC,IAAP,IAAe,KAAlC;;AACA,MAAI,UAAJ,EAAgB;AACd,QAAM,QAAQ,GAAG,YAAY,EAA7B;;AACA,QAAI,CAAC,QAAL,EAAe;AACb,UAAM,KAAK,GAAG,IAAI,KAAJ,CAAU,MAAV,CAAd;AACA,aAAO,OAAO,CAAC,MAAR,CAAe,KAAf,CAAP;AACD;AACF;;AACD,SAAO,MAAP;AACD,CAVD,E,CAYA;;AACA,QAAQ,CAAC,YAAT,CAAsB,QAAtB,CAA+B,GAA/B,CACE,UAAC,QAAD,EAA4B;AAC1B,MAAI,QAAQ,CAAC,MAAT,IAAmB,GAAnB,IAA0B,QAAQ,CAAC,MAAT,GAAkB,GAAhD,EAAqD;AACnD,QAAQ,IAAR,GAAiB,QAAQ,CAAC,IAA1B,CAAQ,IAAR;;AACA,QAAI,IAAI,KAAK,GAAT,IAAgB,IAAI,KAAK,CAAzB,IAA8B,IAAI,KAAK,CAA3C,EAA8C;AAC5C,aAAO,QAAP;AACD,KAJkD,CAKnD;AACA;AACA;;;AACA,QAAI,IAAI,KAAK,GAAb,EAAkB;AAChB;AACA,MAAA,MAAM,CAAC,OAAP,CAAe,MAAf;AACD;;AACD,WAAO,OAAO,CAAC,MAAR,CAAe,QAAf,CAAP;AACD;;AACD,SAAO,OAAO,CAAC,MAAR,CAAe,QAAf,CAAP;AACD,CAjBH,EAkBE,UAAC,KAAD;AAAA,SAAW,OAAO,CAAC,MAAR,CAAe,KAAf,CAAX;AAAA,CAlBF;;IAqBqB,I;;;;;;;WACnB;AACA;;4EACA,iBAAoB,MAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACoB,QAAQ,CAAC,MAAD,CAD5B;;AAAA;AACQ,gBAAA,GADR;AAEE;AACM,gBAAA,MAHR,GAGoC,KAAK,eAAL,CAAqB,GAArB,CAHpC;AAAA,iDAIS,OAAO,CAAC,OAAR,CAAgB,MAAhB,CAJT;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,O;;;;;;;QAOA;;;;WACQ,yBAAuB,GAAvB,EAAyC;AAC/C,aAAO;AACL,QAAA,IAAI,EAAE,GAAG,CAAC,IAAJ,CAAS,IAAT,IAAiB,GAAG,CAAC,MADtB;AAEL,QAAA,IAAI,EAAE,GAAG,CAAC,IAAJ,CAAS,IAAT,IAAiB,GAAG,CAAC,IAFtB;AAGL,QAAA,OAAO,EAAE,GAAG,CAAC,IAAJ,CAAS,OAAT,IAAoB,GAAG,CAAC;AAH5B,OAAP;AAKD;;;;;;SAjBkB,I","sourcesContent":["import axios, { AxiosResponse, AxiosRequestConfig } from 'axios'\nimport { getCookie } from '@/utils/auth'\nimport router from '@/router'\n\nconsole.log('process.env.NODE_ENV', process.env.NODE_ENV);\nconsole.log('process.env.VUE_APP_API_BASE_URL', process.env.VUE_APP_API_BASE_URL);\n\n// 返回数据格式\nexport interface ResponseData<T> {\n  code: number\n  data: T\n  message: string\n}\n\n// 创建axios实例\nconst instance = axios.create({\n  // baseURL: process.env.NODE_ENV === 'production' ? process.env.VUE_APP_API_BASE_URL : '', // 兼容 github里 vue3-project,实际项目具体操作区分\n  baseURL: '', // 兼容 github里 vue3-project,实际项目具体操作区分\n  timeout: 10000,\n  withCredentials: true\n})\n\n// 检查权限\nexport function validateAuth(): boolean {\n  const token = getCookie()\n  if (!token) {\n    return false\n  }\n  instance.defaults.headers.common.Authorization = token\n  return true\n}\n\n// 添加请求时拦截\ninstance.interceptors.request.use((config: AxiosRequestConfig) => {\n  const isNeedAuth = config.auth || false\n  if (isNeedAuth) {\n    const hasToken = validateAuth()\n    if (!hasToken) {\n      const error = new Error('暂无权限')\n      return Promise.reject(error)\n    }\n  }\n  return config\n})\n\n// 添加响应时的拦截\ninstance.interceptors.response.use(\n  (response: AxiosResponse) => {\n    if (response.status >= 200 && response.status < 300) {\n      const { code } = response.data\n      if (code === 200 || code === 1 || code === 0) {\n        return response\n      }\n      // if (code === 0) {\n      //   router.replace('/login')\n      // }\n      if (code === 403) {\n        // 用户无权限\n        router.replace('/403')\n      }\n      return Promise.reject(response)\n    }\n    return Promise.reject(response)\n  },\n  (error) => Promise.reject(error)\n)\n\nexport default class Http {\n  // 封装 GET、POST、PATCH、PUT、DELETE 等请求的配置参数\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  static async create(config: AxiosRequestConfig): Promise<ResponseData<any>> {\n    const res = await instance(config)\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const result: ResponseData<any> = this.successResponse(res)\n    return Promise.resolve(result)\n  }\n\n  // 返回数据格式\n  private static successResponse(res: AxiosResponse) {\n    return {\n      code: res.data.code || res.status,\n      data: res.data.data || res.data,\n      message: res.data.message || res.statusText\n    }\n  }\n}\n"],"sourceRoot":""}]}