{"remainingRequest":"/Users/luochang/Desktop/vue3-project/node_modules/babel-loader/lib/index.js!/Users/luochang/Desktop/vue3-project/node_modules/ts-loader/index.js??ref--14-2!/Users/luochang/Desktop/vue3-project/node_modules/eslint-loader/index.js??ref--13-0!/Users/luochang/Desktop/vue3-project/src/store/modules/databoardStore/index.ts","dependencies":[{"path":"/Users/luochang/Desktop/vue3-project/src/store/modules/databoardStore/index.ts","mtime":1631432266896},{"path":"/Users/luochang/Desktop/vue3-project/node_modules/cache-loader/dist/cjs.js","mtime":1611888872654},{"path":"/Users/luochang/Desktop/vue3-project/node_modules/babel-loader/lib/index.js","mtime":1607827004578},{"path":"/Users/luochang/Desktop/vue3-project/node_modules/ts-loader/index.js","mtime":1608712855794},{"path":"/Users/luochang/Desktop/vue3-project/node_modules/eslint-loader/index.js","mtime":1611891883494}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gIi9Vc2Vycy9sdW9jaGFuZy9EZXNrdG9wL3Z1ZTMtcHJvamVjdC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vc2xpY2VkVG9BcnJheSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zbGljZS5qcyI7CmltcG9ydCB7IEVsTWVzc2FnZSB9IGZyb20gJ2VsZW1lbnQtcGx1cyc7CmltcG9ydCB7IGdldEdhbWVMaXN0LCBnZXRSZXBvcnRMaXN0IH0gZnJvbSAnQC9hcGkvbW9kdWxlcy9kYXRhYm9hcmQnOyAvLyDmoLnmja7nlKjmiLfnnIvmnb/mnYPpmZDnlJ/miJDnm7jlupTnmoTlr7zoiKrliJfooagKLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnkKLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnVzZWQtdmFycwoKZnVuY3Rpb24gZm9ybWF0TWVudVJlcG9ydChkYXRhKSB7CiAgdmFyIHJlY3Vyc2lvbiA9IGZ1bmN0aW9uIHJlY3Vyc2lvbihsaXN0KSB7CiAgICB2YXIgcmVzdWx0ID0gW107CiAgICBsaXN0LmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgLy8g5LiA57qn5a+86IiqCiAgICAgIGlmIChpdGVtLmNoaWxkcmVuICYmIGl0ZW0uY2hpbGRyZW4ubGVuZ3RoKSB7CiAgICAgICAgcmVzdWx0ID0gcmVzdWx0LmNvbmNhdChyZWN1cnNpb24oaXRlbS5jaGlsZHJlbikpOwogICAgICB9IGVsc2UgewogICAgICAgIHJlc3VsdC5wdXNoKFtpdGVtLm5hbWUsIGl0ZW0ucmVwb3J0VXJsXSk7CiAgICAgIH0KICAgIH0pOwogICAgcmV0dXJuIHJlc3VsdDsKICB9OwoKICB2YXIgcmVwb3J0TWVudSA9IHJlY3Vyc2lvbihkYXRhKTsKICB2YXIgcmVwb3J0TWFwID0gbmV3IE1hcCgpOwogIHJlcG9ydE1lbnUuZm9yRWFjaChmdW5jdGlvbiAoX3JlZikgewogICAgdmFyIF9yZWYyID0gX3NsaWNlZFRvQXJyYXkoX3JlZiwgMiksCiAgICAgICAga2V5ID0gX3JlZjJbMF0sCiAgICAgICAgdmFsdWUgPSBfcmVmMlsxXTsKCiAgICByZXR1cm4gcmVwb3J0TWFwLnNldChrZXksIHZhbHVlKTsKICB9KTsKICByZXR1cm4gcmVwb3J0TWFwOwp9Cgp2YXIgZGF0YWJvYXJkTW9kdWxlID0gewogIG5hbWVzcGFjZWQ6IHRydWUsCiAgc3RhdGU6IHsKICAgIGdhbWVMaXN0OiBbXSwKICAgIHNlbGVjdGVkR2FtZTogbnVsbCwKICAgIHJlcG9ydE1lbnVMaXN0OiBbXSAvLyDmiYDmnInmiqXooajliJfooagKCiAgfSwKICBtdXRhdGlvbnM6IHsKICAgIFNFVF9HQU1FX0xJU1Q6IGZ1bmN0aW9uIFNFVF9HQU1FX0xJU1Qoc3RhdGUsIHZhbHVlKSB7CiAgICAgIHN0YXRlLmdhbWVMaXN0ID0gdmFsdWU7CiAgICB9LAogICAgU0VUX1NFTEVDVEVEX0dBTUU6IGZ1bmN0aW9uIFNFVF9TRUxFQ1RFRF9HQU1FKHN0YXRlLCB2YWx1ZSkgewogICAgICBzdGF0ZS5zZWxlY3RlZEdhbWUgPSB2YWx1ZTsKICAgIH0sCiAgICBTRVRfUkVQT1JUX0xJU1Q6IGZ1bmN0aW9uIFNFVF9SRVBPUlRfTElTVChzdGF0ZSkgewogICAgICB2YXIgbGlzdCA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogW107CiAgICAgIC8vIGNvbnN0IG1lbnVzID0gZm9ybWF0TWVudVJlcG9ydChsaXN0KQogICAgICAvLyBjb25zb2xlLmxvZygnZnJlcG9ydE1hcCcsIG1lbnVzKQogICAgICBzdGF0ZS5yZXBvcnRNZW51TGlzdCA9IGxpc3Q7CiAgICB9CiAgfSwKICBhY3Rpb25zOiB7CiAgICBzZXRHYW1lTGlzdDogZnVuY3Rpb24gc2V0R2FtZUxpc3QoX3JlZjMpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWYzLmNvbW1pdCwKICAgICAgICAgIHN0YXRlID0gX3JlZjMuc3RhdGU7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgZ2V0R2FtZUxpc3QoKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIGlmIChyZXMuZGF0YSkgewogICAgICAgICAgICB2YXIgZGF0YSA9IHJlcy5kYXRhOwogICAgICAgICAgICB2YXIgZGVmYXVsdEdhbWUgPSBzdGF0ZS5zZWxlY3RlZEdhbWU7CgogICAgICAgICAgICBpZiAoZGF0YS5sZW5ndGgpIHsKICAgICAgICAgICAgICBpZiAoIXN0YXRlLnNlbGVjdGVkR2FtZSkgewogICAgICAgICAgICAgICAgZGVmYXVsdEdhbWUgPSBkYXRhWzBdIHx8IG51bGw7CiAgICAgICAgICAgICAgICBjb21taXQoJ1NFVF9TRUxFQ1RFRF9HQU1FJywgZGVmYXVsdEdhbWUpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY29tbWl0KCdTRVRfR0FNRV9MSVNUJywgZGF0YSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJlc29sdmUoZGVmYXVsdEdhbWUpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcign5ri45oiP5pWw5o2u6I635Y+W5aSx6LSlJykpOwogICAgICAgICAgfQogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgIHZhciBtc2cgPSBlcnIubWVzc2FnZSB8fCAn6K+35rGC5byC5bi4JzsKICAgICAgICAgIEVsTWVzc2FnZS5lcnJvcihtc2cpOwogICAgICAgICAgcmVqZWN0KGVycik7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIHNldFJlcG9ydExpc3Q6IGZ1bmN0aW9uIHNldFJlcG9ydExpc3QoX3JlZjQsIHZhbHVlKSB7CiAgICAgIHZhciBjb21taXQgPSBfcmVmNC5jb21taXQsCiAgICAgICAgICBnZXR0ZXJzID0gX3JlZjQuZ2V0dGVyczsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICB2YXIgX2dldHRlcnMkdXNlckluZm87CgogICAgICAgIGdldFJlcG9ydExpc3QoewogICAgICAgICAgdXNlcklkOiAoZ2V0dGVycyA9PT0gbnVsbCB8fCBnZXR0ZXJzID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX2dldHRlcnMkdXNlckluZm8gPSBnZXR0ZXJzLnVzZXJJbmZvKSA9PT0gbnVsbCB8fCBfZ2V0dGVycyR1c2VySW5mbyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2dldHRlcnMkdXNlckluZm8uaWQpIHx8ICcnLAogICAgICAgICAgZ2FtZUJhc2VJZDogdmFsdWUKICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIGlmIChyZXMuZGF0YSkgewogICAgICAgICAgICB2YXIgZGF0YSA9IHJlcy5kYXRhOwogICAgICAgICAgICB2YXIgbGlzdCA9IFtdOwoKICAgICAgICAgICAgaWYgKHZhbHVlIDwgMikgewogICAgICAgICAgICAgIGxpc3QgPSBkYXRhLnNsaWNlKDAsIHZhbHVlKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBsaXN0ID0gZGF0YS5zbGljZSh2YWx1ZSwgNik7CiAgICAgICAgICAgIH0gLy8g55Sf5oiQ5oql6KGo5bem5L6n5a+86IiqCgoKICAgICAgICAgICAgY29tbWl0KCdTRVRfUkVQT1JUX0xJU1QnLCBsaXN0KTsKICAgICAgICAgICAgcmVzb2x2ZShsaXN0KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoJ+a4uOaIj+aKpeihqOiOt+WPluWksei0pScpKTsKICAgICAgICAgIH0KICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICB2YXIgbXNnID0gZXJyLm1lc3NhZ2UgfHwgJ+ivt+axguW8guW4uCc7CiAgICAgICAgICBFbE1lc3NhZ2UuZXJyb3IobXNnKTsKICAgICAgICAgIHJlamVjdChlcnIpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KICB9Cn07CmV4cG9ydCBkZWZhdWx0IGRhdGFib2FyZE1vZHVsZTs="},{"version":3,"sources":["/Users/luochang/Desktop/vue3-project/node_modules/eslint-loader/index.js??ref--13-0!/Users/luochang/Desktop/vue3-project/src/store/modules/databoardStore/index.ts"],"names":[],"mappings":"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","sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { ActionContext } from 'vuex'\nimport { ElMessage } from 'element-plus'\nimport DataBoardState, { GameInfo, DataboardMenu } from './types'\nimport { getGameList, getReportList } from '@/api/modules/databoard'\nimport RootStateTypes from '../../types'\n\n// 根据用户看板权限生成相应的导航列表\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nfunction formatMenuReport(data: any[]) {\n  const recursion = (list: DataboardMenu[]): string[][] => {\n    let result: string[][] = []\n    list.forEach((item: DataboardMenu) => {\n      // 一级导航\n      if (item.children && item.children.length) {\n        result = result.concat(recursion(item.children))\n      } else {\n        result.push([item.name, item.reportUrl])\n      }\n    })\n    return result\n  }\n  const reportMenu = recursion(data)\n  const reportMap = new Map()\n  reportMenu.forEach(([key, value]) => reportMap.set(key, value))\n  return reportMap\n}\n\nconst databoardModule = {\n  namespaced: true,\n  state: {\n    gameList: [], // 游戏列表\n    selectedGame: null, // 选中的游戏\n    reportMenuList: [] // 所有报表列表\n  },\n  mutations: {\n    SET_GAME_LIST(state: DataBoardState, value: GameInfo[]) {\n      state.gameList = value\n    },\n    SET_SELECTED_GAME(state: DataBoardState, value: GameInfo) {\n      state.selectedGame = value\n    },\n    SET_REPORT_LIST(state: DataBoardState, list = []) {\n      // const menus = formatMenuReport(list)\n      // console.log('freportMap', menus)\n      state.reportMenuList = list\n    }\n  },\n  actions: {\n    setGameList({ commit, state }: ActionContext<DataBoardState, RootStateTypes>) {\n      return new Promise<GameInfo>((resolve, reject) => {\n        getGameList()\n          .then((res) => {\n            if (res.data) {\n              const { data } = res\n              let defaultGame = state.selectedGame\n              if (data.length) {\n                if (!state.selectedGame) {\n                  defaultGame = data[0] || null\n                  commit('SET_SELECTED_GAME', defaultGame)\n                }\n                commit('SET_GAME_LIST', data)\n              }\n              resolve(defaultGame)\n            } else {\n              reject(new Error('游戏数据获取失败'))\n            }\n          })\n          .catch((err) => {\n            const msg = err.message || '请求异常'\n            ElMessage.error(msg)\n            reject(err)\n          })\n      })\n    },\n    setReportList({ commit, getters }: ActionContext<string, RootStateTypes>, value: number) {\n      return new Promise<void>((resolve, reject) => {\n        getReportList({\n          userId: getters?.userInfo?.id || '',\n          gameBaseId: value\n        })\n          .then((res) => {\n            if (res.data) {\n              const { data } = res\n              let list = []\n              if (value < 2) {\n                list = data.slice(0, value)\n              } else {\n                list = data.slice(value, 6)\n              }\n              // 生成报表左侧导航\n              commit('SET_REPORT_LIST', list)\n              resolve(list)\n            } else {\n              reject(new Error('游戏报表获取失败'))\n            }\n          })\n          .catch((err) => {\n            const msg = err.message || '请求异常'\n            ElMessage.error(msg)\n            reject(err)\n          })\n      })\n    }\n  }\n}\n\nexport default databoardModule\n"],"sourceRoot":""}]}